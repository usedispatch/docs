<!doctype html>
<html lang="en" dir="ltr" class="mdx-wrapper mdx-page plugin-pages plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<title data-rh="true">Dispatch Protocol | Dispatch Developer Documentation</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.dispatch.forum/litepaper"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Dispatch Protocol | Dispatch Developer Documentation"><meta data-rh="true" name="description" content="The Dispatch Protocol allows the sending of authenticated messages and forum communities on the Solana blockchain."><meta data-rh="true" property="og:description" content="The Dispatch Protocol allows the sending of authenticated messages and forum communities on the Solana blockchain."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.dispatch.forum/litepaper"><link data-rh="true" rel="alternate" href="https://docs.dispatch.forum/litepaper" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.dispatch.forum/litepaper" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.e23b4a58.css">
<link rel="preload" href="/assets/js/runtime~main.e72bf120.js" as="script">
<link rel="preload" href="/assets/js/main.942e4d5f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/docs/developer">Developer</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/litepaper">Litepaper</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/usedispatch" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><main class="container container--fluid margin-vert--lg"><div class="row mdxPageWrapper_j9I6"><div class="col col--8"><h1>Dispatch Protocol</h1><p>The Dispatch Protocol allows the sending of authenticated messages and forum communities on the Solana blockchain.
The protocol consists of two programs, the Messaging program and the Forum program. Messaging is used for wallet-to-wallet and protocol-to-wallet messaging. Forum is used for forums, including comments, replies, likes, etc.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="messaging">Messaging<a class="hash-link" href="#messaging" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="design">Design<a class="hash-link" href="#design" title="Direct link to heading">​</a></h3><p>The messaging program defines two new types of accounts: mailbox and message accounts.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="-mailbox-accounts-"><ins> Mailbox Accounts </ins><a class="hash-link" href="#-mailbox-accounts-" title="Direct link to heading">​</a></h4><p>Each mailbox has an authority (a public key) known as the receiver, which is currently encoded in the PDA that defines the account. It represents the messages sent to that receiver. The mailbox keeps track of the number of open messages for that mailbox. Any user can create the mailbox account for a receiver, allowing the sending of messages to addresses that have not yet used the protocol. The user who creates the mailbox account must deposit the rent exemption, which they will not receive back. Only the receiver can then further modify the mailbox account.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="-message-accounts-"><ins> Message Accounts </ins><a class="hash-link" href="#-message-accounts-" title="Direct link to heading">​</a></h4><p>Each message sent via dispatch creates a new blockchain account. This account belongs to a specific, existing mailbox account. The mailbox is encoded in the PDA of the message. A message can contain an arbitrary string. When sending a message, the sender must sign the transaction to authenticate the message. Each message also has a payer, which may be either the sender or another signer. The payer deposits the rent exemption required for the message and also pays the protocol transaction fee (see below). You can optionally attach an incentive to the message that the receiver can claim. Incentives can be awarded as any SPL Token, including Metaplex NFTs. Upon claim, an event is emitted as a form of read receipt.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="-deleting-messages-"><ins> Deleting Messages </ins><a class="hash-link" href="#-deleting-messages-" title="Direct link to heading">​</a></h4><p>The receiver, sender, or payer of a message may choose to delete the message. When a message is deleted, its account is removed from the blockchain and the rent deposit is returned to the original payer of the message.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="postbox">Postbox<a class="hash-link" href="#postbox" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="design-1">Design<a class="hash-link" href="#design-1" title="Direct link to heading">​</a></h3><p>Similar to messaging, the postbox program defines two new types of accounts: postbox and post accounts. Every hierarchy of posts in a forum (top level topics to nested threads) are structured with the same accounts. The postbox program also distributes tokens for designated moderators. </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="-postbox-accounts-"><ins> Postbox Accounts </ins><a class="hash-link" href="#-postbox-accounts-" title="Direct link to heading">​</a></h4><p>Each postbox is associated with a public key to organize posts, which is encoded in the PDA that defines the account. Any public key is able to maintain a postbox, which allows for many uses ranging from forum posts for a community to user profile posts similar to a social media “wall”.  A postbox maintains additional settings including a title, description, the postbox owners, the moderator mint account, and restrictions to post creators. Similar to mailbox, postbox maintains a count of post IDs which increments on each new message. </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="-post-accounts-"><ins> Post Accounts </ins><a class="hash-link" href="#-post-accounts-" title="Direct link to heading">​</a></h4><p>Each post made for a given postbox is maintained in its own account on-chain. These posts are accessed as a PDA with the postbox public key and post ID. A post account stores the original poster&#x27;s public key, the message string, a count of upvotes and downvotes, and an optional reply field as a public key. The reply public key must also be another post account to be valid. Post accounts can be deleted by the original poster or a moderator of the postbox.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="-moderator-token-"><ins> Moderator Token </ins><a class="hash-link" href="#-moderator-token-" title="Direct link to heading">​</a></h4><p>Moderators are maintained for each postbox by a token minted to each moderator, granting them access to moderator privileges. Moderator token minting is handled by the program. Moderators are able to add other moderators and delete posts.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="additional-details">Additional Details<a class="hash-link" href="#additional-details" title="Direct link to heading">​</a></h2><p>Dispatch Protocol charges a fee for each message and post that is sent. This is currently 50,000 lamports per message. Creating a postbox has a fee as well, a personal postbox (postbox public key and creator are the same) is 50,000 lamports, creating a postbox for any other public key is 1 SOL. </p><p>There is also a full-featured client library and a minimalistic command line tool to aid in the use of the protocol. Please see <a href="https://docs.usedispatch.net/" target="_blank" rel="noopener noreferrer">https://docs.usedispatch.net/</a> for more details.</p></div><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#messaging" class="table-of-contents__link toc-highlight">Messaging</a><ul><li><a href="#design" class="table-of-contents__link toc-highlight">Design</a></li></ul></li><li><a href="#postbox" class="table-of-contents__link toc-highlight">Postbox</a><ul><li><a href="#design-1" class="table-of-contents__link toc-highlight">Design</a></li></ul></li><li><a href="#additional-details" class="table-of-contents__link toc-highlight">Additional Details</a></li></ul></div></div></div></main></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/developer">Developer</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://app.dispatch.forum/forum/DHepkufWDLJ9DCD37nbEDbPSFKjGiziQ6Lbgo1zgGX7S" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://t.me/+tY-bKbPLixw1MmI5" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/usedispatch" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/usedispatch" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Dispatch Protocol</div></div></div></footer></div>
<script src="/assets/js/runtime~main.e72bf120.js"></script>
<script src="/assets/js/main.942e4d5f.js"></script>
</body>
</html>